<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Execution Model | FireDucks</title>
<meta name=description content="execution model"><meta property="og:title" content="Execution Model"><meta property="og:description" content="execution model"><meta property="og:type" content="article"><meta property="og:url" content="https://fireducks-dev.github.io/docs/user-guide/02-exec-model/"><meta property="og:image" content="https://fireducks-dev.github.io/images/fireducks_1200x630.png"><meta property="article:section" content="docs"><meta itemprop=name content="Execution Model"><meta itemprop=description content="execution model"><meta itemprop=wordCount content="377"><meta itemprop=image content="https://fireducks-dev.github.io/images/fireducks_1200x630.png"><meta itemprop=keywords content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://fireducks-dev.github.io/images/fireducks_1200x630.png"><meta name=twitter:title content="Execution Model"><meta name=twitter:description content="execution model"><link rel=preload href=/scss/main.min.2404b01c5fb65f0b4d76f0c632723d405f2faf20557f5aeff94d8efb2e91ec8b.css as=style><link href=/scss/main.min.2404b01c5fb65f0b4d76f0c632723d405f2faf20557f5aeff94d8efb2e91ec8b.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.3.min.js integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin=anonymous></script></head><body class=td-page><header><nav class="td-navbar navbar-dark js-navbar-scroll"><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>FireDucks</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/docs/get-started><span>Get Started</span></a></li><li class=nav-item><a class=nav-link href=/docs/user-guide/01-intro/><span>Docs</span></a></li><li class=nav-item><a class=nav-link href=/posts><span>Blogs</span></a></li><li class=nav-item><a class=nav-link href=/docs/benchmarks><span>Benchmarks</span></a></li><li class=nav-item><a class=nav-link href=https://github.com/fireducks-dev/fireducks/issues target=_blank rel=noopener><span>Report Issue</span></a></li><li class=nav-item><a class=nav-link href=/docs/about-us><span>About Us</span></a></li><li class="nav-item dropdown d-none d-lg-block"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><ul class=dropdown-menu><li><a class=dropdown-item href=/ja/docs/user-guide/02-exec-model/>Japanese</a></li></ul></div></li></ul></div><div class="d-none d-lg-block"></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse" id=td-section-nav><div class="td-sidebar-nav__section nav-item dropdown d-block d-lg-none"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><ul class=dropdown-menu><li><a class=dropdown-item href=/ja/docs/user-guide/02-exec-model/>Japanese</a></li></ul></div></div><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Docs</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsget-started-li><a href=/docs/get-started/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsget-started><span>Get Started</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsuser-guide-li><a href=/docs/user-guide/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsuser-guide><span>User Guide</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser-guide01-intro-li><a href=/docs/user-guide/01-intro/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser-guide01-intro><span>Introduction</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docsuser-guide02-exec-model-li><a href=/docs/user-guide/02-exec-model/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-docsuser-guide02-exec-model><span class=td-sidebar-nav-active-item>Execution Model</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser-guide03-acceleration-li><a href=/docs/user-guide/03-acceleration/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser-guide03-acceleration><span>Acceleration in FireDucks</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser-guide04-compatibility-li><a href=/docs/user-guide/04-compatibility/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser-guide04-compatibility><span>pandas compatibility</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser-guide05-api-li><a href=/docs/user-guide/05-api/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser-guide05-api><span>FireDucks Own API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser-guidetips-li><a href=/docs/user-guide/tips/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser-guidetips><span>Tips</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsbenchmarks-li><a href=/docs/benchmarks/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsbenchmarks><span>Benchmarks</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsbenchmarksarchive-li><a href=/docs/benchmarks/archive/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsbenchmarksarchive><span>Benchmark Archive</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsuse-case-li><a href=/docs/use-case/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsuse-case><span>Use Cases</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuse-casedata-scientist-li><a href=/docs/use-case/data-scientist/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuse-casedata-scientist><span>All Data Scientists</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuse-caseindustries-li><a href=/docs/use-case/industries/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuse-caseindustries><span>Highly suitable use cases</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsrelease-note-li><a href=/docs/release-note/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsrelease-note><span>Release Note</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsabout-us-li><a href=/docs/about-us/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsabout-us><span>About Us</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docshelp-li><a href=/docs/help/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docshelp><span>Help</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshelpfaq-li><a href=/docs/help/faq/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshelpfaq><span>FAQ</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshelpcontact-li><a href=/docs/help/contact/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshelpcontact><span>Contact</span></a></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#lazy-execution-model>Lazy execution model</a></li><li><a href=#about-time-measurement>About time measurement</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>Docs</a></li><li class=breadcrumb-item><a href=/docs/user-guide/>User Guide</a></li><li class="breadcrumb-item active" aria-current=page>Execution Model</li></ol></nav><div class=td-content><h1>Execution Model</h1><div class=lead>execution model</div><header class=article-meta></header><p>The execution model of FireDucks differs from that of pandas. pandas is an eager execution model in which the process is executed immediately upon method invocation, while FireDucks is a lazy execution model in which the process is executed in batches when the results are needed.</p><h2 id=lazy-execution-model>Lazy execution model</h2><p>The following figure shows the execution images of pandas and FireDucks.</p><p><img src=../exec_model.webp alt="execution model"></p><p>In pandas, for example, calling the <code>read_csv</code> method reads data from a CSV file. FireDucks, on the other hand, only generates an intermediate language equivalent to <code>read_csv</code>, but does not read the data. Therefore, the line <code>df = pd.read_csv("data.csv")</code> ends immediately in FireDucks.</p><p>Thus, the main methods of FireDucks do not actually process the data frame, but generate the intermediate language. Each time a method is called, more and more intermediate language is generated, and when the result is needed (e.g., when writing to a csv file), the previously generated intermediate language is executed all at once.</p><p>FireDucks performs actual execution at the following points</p><ul><li>Saving to a file (<code>DataFrame.to_csv</code>, <code>DataFrame.to_parquet</code>, etc.)</li><li>Displaying a data frame (<code>print(df)</code>, etc.)</li></ul><p>Because of these differences in execution models, those familiar with pandas may find that time-consuming methods finish in a fraction of a second, or that saving to a csv file takes longer than expected.</p><h2 id=about-time-measurement>About time measurement</h2><p>FireDucks performs delayed execution, so if you want to measure the actual processing time for each method, a little additional effort is required.</p><p>For example, if you insert timers are below, the last interval (<code>t3 - t2</code>) will include the time of all processes.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>t0 <span style=color:#f92672>=</span> time<span style=color:#f92672>.</span>time()
</span></span><span style=display:flex><span>df <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>read_csv(<span style=color:#e6db74>&#34;data.csv&#34;</span>)
</span></span><span style=display:flex><span>t1 <span style=color:#f92672>=</span> time<span style=color:#f92672>.</span>time()
</span></span><span style=display:flex><span>df <span style=color:#f92672>=</span> df<span style=color:#f92672>.</span>sort_values(<span style=color:#e6db74>&#34;a&#34;</span>)
</span></span><span style=display:flex><span>t2 <span style=color:#f92672>=</span> time<span style=color:#f92672>.</span>time()
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>to_csv(<span style=color:#e6db74>&#34;sorted.csv&#34;</span>)
</span></span><span style=display:flex><span>t3 <span style=color:#f92672>=</span> time<span style=color:#f92672>.</span>time()
</span></span></code></pre></div><p>From version 0.9.1, <strong>benchmark mode</strong> has been introduced for this purpose.
When bechmark mode is enabled, FireDucks actually executes a method immediately
after it is called. Since this disables some optimizations of FireDucks, it
should be used only when you want to measure individual methods.</p><p>To enable benchmark mode, please use environment variable:</p><pre tabindex=0><code>FIREDUCKS_FLAGS=&#34;--benchmark-mode&#34;
</code></pre><p>Or it can be enabled in a code as:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> fireducks.core <span style=color:#f92672>import</span> get_fireducks_options
</span></span><span style=display:flex><span>get_fireducks_options()<span style=color:#f92672>.</span>set_benchmark_mode(<span style=color:#66d9ef>True</span>)
</span></span></code></pre></div><p>The other workaround is calling FireDucks&rsquo; own method <a href=https://fireducks-dev.github.io/docs/user-guide/05-api/#_evaluate><code>_evaluate</code></a> for immediate execution.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>t0 <span style=color:#f92672>=</span> time<span style=color:#f92672>.</span>time()
</span></span><span style=display:flex><span>df <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>read_csv(<span style=color:#e6db74>&#34;data.csv&#34;</span>)<span style=color:#f92672>.</span>_evaluate()
</span></span><span style=display:flex><span>t1 <span style=color:#f92672>=</span> time<span style=color:#f92672>.</span>time()
</span></span><span style=display:flex><span>df <span style=color:#f92672>=</span> df<span style=color:#f92672>.</span>sort_values(<span style=color:#e6db74>&#34;a&#34;</span>)<span style=color:#f92672>.</span>_evaluate()
</span></span><span style=display:flex><span>t2 <span style=color:#f92672>=</span> time<span style=color:#f92672>.</span>time()
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>to_csv(<span style=color:#e6db74>&#34;sorted.csv&#34;</span>)<span style=color:#f92672>.</span>_evaluate()
</span></span><span style=display:flex><span>t3 <span style=color:#f92672>=</span> time<span style=color:#f92672>.</span>time()
</span></span></code></pre></div></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="Post issues on GitHub issues" aria-label="Post issues on GitHub issues"><a target=_blank rel=noopener href=https://github.com/fireducks-dev/fireducks aria-label="Post issues on GitHub issues"><i class="fa-brands fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Send an e-mail to us" aria-label="Send an e-mail to us"><a target=_blank rel=noopener href=mailto:contact@fireducks.jp.nec.com aria-label="Send an e-mail to us"><i class="fa-solid fa-envelope"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Follow us in X" aria-label="Follow us in X"><a target=_blank rel=noopener href=https://x.com/fireducksdev aria-label="Follow us in X"><i class="fa-brands fa-x-twitter"></i></a></li></ul></div><div class="col-6 col-sm-4 text-end text-xs-center order-sm-3"></div><div class="td-footer__copyright-etc col-12 col-sm-4 text-center py-2 order-sm-2"><span>&copy; 2024 FireDucks Dev Team All Rights Reserved</span></div></div></div></footer></div><script src=/js/main.min.350b703200e2632331b6ab5a6c71195d176b52e89c9b70db7c43764d40b28d92.js integrity="sha256-NQtwMgDiYyMxtqtabHEZXRdrUuicm3DbfEN2TUCyjZI=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.f724d3de49218995223b7316aa2e53e2b34bf42026bf399ebb21bb02212402d1.js integrity="sha256-9yTT3kkhiZUiO3MWqi5T4rNL9CAmvzmeuyG7AiEkAtE=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>