<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Acceleration in FireDucks | FireDucks</title>
<meta name=description content="There are two mechanisms to accelerate FireDucks. The first is compiler optimization on the IR, intermediate representation, and the second is multithreading on the backend.
Compiler Optimization FireDucks uses a runtime compiler mechanism to convert Python programs into an intermediate language before execution. Optimization on the intermediate language means that the Python program is converted to an intermediate language that can be executed faster without changing the meaning of the program, rather than being executed as-is."><meta property="og:title" content="Acceleration in FireDucks"><meta property="og:description" content="There are two mechanisms to accelerate FireDucks. The first is compiler optimization on the IR, intermediate representation, and the second is multithreading on the backend.
Compiler Optimization FireDucks uses a runtime compiler mechanism to convert Python programs into an intermediate language before execution. Optimization on the intermediate language means that the Python program is converted to an intermediate language that can be executed faster without changing the meaning of the program, rather than being executed as-is."><meta property="og:type" content="article"><meta property="og:url" content="https://fireducks-dev.github.io/docs/user-guide/03-acceleration/"><meta property="og:image" content="https://fireducks-dev.github.io/images/fireducks.png"><meta property="article:section" content="docs"><meta itemprop=name content="Acceleration in FireDucks"><meta itemprop=description content="There are two mechanisms to accelerate FireDucks. The first is compiler optimization on the IR, intermediate representation, and the second is multithreading on the backend.
Compiler Optimization FireDucks uses a runtime compiler mechanism to convert Python programs into an intermediate language before execution. Optimization on the intermediate language means that the Python program is converted to an intermediate language that can be executed faster without changing the meaning of the program, rather than being executed as-is."><meta itemprop=wordCount content="451"><meta itemprop=image content="https://fireducks-dev.github.io/images/fireducks.png"><meta itemprop=keywords content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://fireducks-dev.github.io/images/fireducks.png"><meta name=twitter:title content="Acceleration in FireDucks"><meta name=twitter:description content="There are two mechanisms to accelerate FireDucks. The first is compiler optimization on the IR, intermediate representation, and the second is multithreading on the backend.
Compiler Optimization FireDucks uses a runtime compiler mechanism to convert Python programs into an intermediate language before execution. Optimization on the intermediate language means that the Python program is converted to an intermediate language that can be executed faster without changing the meaning of the program, rather than being executed as-is."><link rel=preload href=/scss/main.min.2404b01c5fb65f0b4d76f0c632723d405f2faf20557f5aeff94d8efb2e91ec8b.css as=style><link href=/scss/main.min.2404b01c5fb65f0b4d76f0c632723d405f2faf20557f5aeff94d8efb2e91ec8b.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.3.min.js integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin=anonymous></script></head><body class=td-page><header><nav class="td-navbar navbar-dark js-navbar-scroll"><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>FireDucks</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/docs/get-started><span>Get Started</span></a></li><li class=nav-item><a class=nav-link href=/docs/user-guide/01-intro/><span>Docs</span></a></li><li class=nav-item><a class=nav-link href=/posts><span>Blogs</span></a></li><li class=nav-item><a class=nav-link href=/docs/benchmarks><span>Benchmarks</span></a></li><li class=nav-item><a class=nav-link href=/docs/about-us><span>About Us</span></a></li><li class="nav-item dropdown d-none d-lg-block"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><ul class=dropdown-menu><li><a class=dropdown-item href=/ja/docs/user-guide/03-acceleration/>Japanese</a></li></ul></div></li></ul></div><div class="d-none d-lg-block"></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse" id=td-section-nav><div class="td-sidebar-nav__section nav-item dropdown d-block d-lg-none"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><ul class=dropdown-menu><li><a class=dropdown-item href=/ja/docs/user-guide/03-acceleration/>Japanese</a></li></ul></div></div><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Docs</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsget-started-li><a href=/docs/get-started/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsget-started><span>Get Started</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsuser-guide-li><a href=/docs/user-guide/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsuser-guide><span>User Guide</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser-guide01-intro-li><a href=/docs/user-guide/01-intro/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser-guide01-intro><span>Introduction</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser-guide02-exec-model-li><a href=/docs/user-guide/02-exec-model/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser-guide02-exec-model><span>Execution Model</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docsuser-guide03-acceleration-li><a href=/docs/user-guide/03-acceleration/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-docsuser-guide03-acceleration><span class=td-sidebar-nav-active-item>Acceleration in FireDucks</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser-guide04-compatibility-li><a href=/docs/user-guide/04-compatibility/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser-guide04-compatibility><span>pandas compatibility</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser-guide05-api-li><a href=/docs/user-guide/05-api/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser-guide05-api><span>FireDucks Own API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser-guidetips-li><a href=/docs/user-guide/tips/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser-guidetips><span>Tips</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsbenchmarks-li><a href=/docs/benchmarks/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsbenchmarks><span>Benchmarks</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsuse-case-li><a href=/docs/use-case/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsuse-case><span>Use Cases</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuse-casedata-scientist-li><a href=/docs/use-case/data-scientist/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuse-casedata-scientist><span>All Data Scientists</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuse-caseindustries-li><a href=/docs/use-case/industries/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuse-caseindustries><span>Highly suitable use cases</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsrelease-note-li><a href=/docs/release-note/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsrelease-note><span>Release Note</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsabout-us-li><a href=/docs/about-us/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsabout-us><span>About Us</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docshelp-li><a href=/docs/help/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docshelp><span>Help</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshelpfaq-li><a href=/docs/help/faq/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshelpfaq><span>FAQ</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshelpcontact-li><a href=/docs/help/contact/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshelpcontact><span>Contact</span></a></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"></div><div class=td-toc><nav id=TableOfContents><ul><li><ul><li><a href=#compiler-accelerated>Compiler Optimization</a></li><li><a href=#multithreaded>Multithreading</a></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>Docs</a></li><li class=breadcrumb-item><a href=/docs/user-guide/>User Guide</a></li><li class="breadcrumb-item active" aria-current=page>Acceleration in FireDucks</li></ol></nav><div class=td-content><h1>Acceleration in FireDucks</h1><header class=article-meta></header><p>There are two mechanisms to accelerate FireDucks. The first is <a href=#compiler-accelerated>compiler optimization</a> on the IR, intermediate representation, and the second is <a href=#multithreaded>multithreading</a> on the backend.</p><h3 id=compiler-accelerated>Compiler Optimization</h3><p>FireDucks uses a runtime compiler mechanism to convert Python programs into an intermediate language before execution. Optimization on the intermediate language means that the Python program is converted to an intermediate language that can be executed faster without changing the meaning of the program, rather than being executed as-is. This is equivalent to automatically performing the kind of tuning that a skilled programmer would perform when writing a program.</p><p>The FireDucks intermediate language is an intermediate language designed specifically for DataFrames, and each instruction in the intermediate language is a highly abstract, information-rich instruction that represents an operation on a DataFrame. Therefore, the FireDucks compiler can understand the meaning of a program without complicated program analysis and can perform optimization specific to DataFrame.</p><h4 id=examples-of-optimizations>Examples of Optimizations</h4><p>Here is an example of such optimization. The following program extracts rows from a DataFrame in which column a is greater than 10, and then extracts column b from that row.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>selected <span style=color:#f92672>=</span> df[df[<span style=color:#e6db74>&#34;a&#34;</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>10</span>][<span style=color:#e6db74>&#34;b&#34;</span>]
</span></span></code></pre></div><p>This is a commonly used process, and the code looks straightforward. However, the process of extracting the first row covers all columns, which is not efficient if df has more columns than just a and b. Because DataFrames generally use column-oriented data structures, the process of extracting a specific row is a much more time-consuming process than extracting a column, and doing so for all columns may result in non-negligible overhead.</p><p>FireDucks optimization uses such domain knowledge to transform the intermediate language so that column extraction is performed first. The transformed process, written in Python, looks like the following code.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>tmp <span style=color:#f92672>=</span> df[[<span style=color:#e6db74>&#34;a&#34;</span>, <span style=color:#e6db74>&#34;b&#34;</span>]]
</span></span><span style=display:flex><span>selected <span style=color:#f92672>=</span> tmp[df[<span style=color:#e6db74>&#34;a&#34;</span>] <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>10</span>][<span style=color:#e6db74>&#34;b&#34;</span>]
</span></span></code></pre></div><p>While skilled users who are aware of DataFrame&rsquo;s internal data structures will prefer code like this, FireDucks performs this acceleration as an optimization on an intermediate language.</p><h3 id=multithreaded>Multithreading</h3><p>In FireDucks, the user API and its execution are completely independent of each other via an intermediate language. The backend executes the instructions of the intermediate language and has the ability to perform specific data structures and operations on data frames.</p><p>FireDucks allows the backend to be changed, for example, a backend tuned for multi-core, a backend using accelerators such as GPUs, etc., to match the target environment, thereby increasing speed. The backend can be changed by environment variables, allowing the user to switch backends without changing the user program at all.</p><p>FireDucks Beta includes a multi-threaded backend for CPUs. This backend uses Apache Arrow as the data structure and adds its own parallelization in addition to the data frame operations provided by Apache Arrow.</p></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="Post issues on GitHub issues" aria-label="Post issues on GitHub issues"><a target=_blank rel=noopener href=https://github.com/fireducks-dev/fireducks aria-label="Post issues on GitHub issues"><i class="fa-brands fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Send an e-mail to us" aria-label="Send an e-mail to us"><a target=_blank rel=noopener href=mailto:contact@fireducks.jp.nec.com aria-label="Send an e-mail to us"><i class="fa-solid fa-envelope"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Follow us in X" aria-label="Follow us in X"><a target=_blank rel=noopener href=https://x.com/fireducksdev aria-label="Follow us in X"><i class="fa-brands fa-x-twitter"></i></a></li></ul></div><div class="col-6 col-sm-4 text-end text-xs-center order-sm-3"></div><div class="td-footer__copyright-etc col-12 col-sm-4 text-center py-2 order-sm-2"><span>&copy; 2024 FireDucks Dev Team All Rights Reserved</span></div></div></div></footer></div><script src=/js/main.min.350b703200e2632331b6ab5a6c71195d176b52e89c9b70db7c43764d40b28d92.js integrity="sha256-NQtwMgDiYyMxtqtabHEZXRdrUuicm3DbfEN2TUCyjZI=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.f724d3de49218995223b7316aa2e53e2b34bf42026bf399ebb21bb02212402d1.js integrity="sha256-9yTT3kkhiZUiO3MWqi5T4rNL9CAmvzmeuyG7AiEkAtE=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>