<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>pandas compatibility | FireDucks</title>
<meta name=description content="FireDucks provides the same API (class names, method names, and attribute names) as pandas, and aims for compatibility in terms of being able to use it simply by changing import statements.
Compatibility Concept We do not aim for compatibility in the following aspects.
Complete consistency of class names FireDucks provides a pandas-compatible API in the module fireducks.pandas. The complete class names, including module names, are different from those of pandas. For example, the data frame type is pandas."><meta property="og:title" content="pandas compatibility"><meta property="og:description" content="FireDucks provides the same API (class names, method names, and attribute names) as pandas, and aims for compatibility in terms of being able to use it simply by changing import statements.
Compatibility Concept We do not aim for compatibility in the following aspects.
Complete consistency of class names FireDucks provides a pandas-compatible API in the module fireducks.pandas. The complete class names, including module names, are different from those of pandas. For example, the data frame type is pandas."><meta property="og:type" content="article"><meta property="og:url" content="https://fireducks-dev.github.io/docs/user-guide/04-compatibility/"><meta property="og:image" content="https://fireducks-dev.github.io/images/fireducks_1200x630.png"><meta property="article:section" content="docs"><meta itemprop=name content="pandas compatibility"><meta itemprop=description content="FireDucks provides the same API (class names, method names, and attribute names) as pandas, and aims for compatibility in terms of being able to use it simply by changing import statements.
Compatibility Concept We do not aim for compatibility in the following aspects.
Complete consistency of class names FireDucks provides a pandas-compatible API in the module fireducks.pandas. The complete class names, including module names, are different from those of pandas. For example, the data frame type is pandas."><meta itemprop=wordCount content="675"><meta itemprop=image content="https://fireducks-dev.github.io/images/fireducks_1200x630.png"><meta itemprop=keywords content><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://fireducks-dev.github.io/images/fireducks_1200x630.png"><meta name=twitter:title content="pandas compatibility"><meta name=twitter:description content="FireDucks provides the same API (class names, method names, and attribute names) as pandas, and aims for compatibility in terms of being able to use it simply by changing import statements.
Compatibility Concept We do not aim for compatibility in the following aspects.
Complete consistency of class names FireDucks provides a pandas-compatible API in the module fireducks.pandas. The complete class names, including module names, are different from those of pandas. For example, the data frame type is pandas."><link rel=preload href=/scss/main.min.2404b01c5fb65f0b4d76f0c632723d405f2faf20557f5aeff94d8efb2e91ec8b.css as=style><link href=/scss/main.min.2404b01c5fb65f0b4d76f0c632723d405f2faf20557f5aeff94d8efb2e91ec8b.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.3.min.js integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin=anonymous></script></head><body class=td-page><header><nav class="td-navbar navbar-dark js-navbar-scroll"><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/><span class="navbar-brand__logo navbar-logo"></span><span class=navbar-brand__name>FireDucks</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class=nav-item><a class=nav-link href=/docs/get-started><span>Get Started</span></a></li><li class=nav-item><a class=nav-link href=/docs/user-guide/01-intro/><span>Docs</span></a></li><li class=nav-item><a class=nav-link href=/posts><span>Blogs</span></a></li><li class=nav-item><a class=nav-link href=/docs/benchmarks><span>Benchmarks</span></a></li><li class=nav-item><a class=nav-link href=https://github.com/fireducks-dev/fireducks/issues target=_blank rel=noopener><span>Report Issue</span></a></li><li class=nav-item><a class=nav-link href=/docs/about-us><span>About Us</span></a></li><li class="nav-item dropdown d-none d-lg-block"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><ul class=dropdown-menu><li><a class=dropdown-item href=/ja/docs/user-guide/04-compatibility/>Japanese</a></li></ul></div></li></ul></div><div class="d-none d-lg-block"></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse" id=td-section-nav><div class="td-sidebar-nav__section nav-item dropdown d-block d-lg-none"><div class=dropdown><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><ul class=dropdown-menu><li><a class=dropdown-item href=/ja/docs/user-guide/04-compatibility/>Japanese</a></li></ul></div></div><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Docs</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsget-started-li><a href=/docs/get-started/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsget-started><span>Get Started</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsuser-guide-li><a href=/docs/user-guide/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsuser-guide><span>User Guide</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser-guide01-intro-li><a href=/docs/user-guide/01-intro/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser-guide01-intro><span>Introduction</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser-guide02-exec-model-li><a href=/docs/user-guide/02-exec-model/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser-guide02-exec-model><span>Execution Model</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser-guide03-acceleration-li><a href=/docs/user-guide/03-acceleration/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser-guide03-acceleration><span>Acceleration in FireDucks</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docsuser-guide04-compatibility-li><a href=/docs/user-guide/04-compatibility/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id=m-docsuser-guide04-compatibility><span class=td-sidebar-nav-active-item>pandas compatibility</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser-guide05-api-li><a href=/docs/user-guide/05-api/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser-guide05-api><span>FireDucks Own API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuser-guidetips-li><a href=/docs/user-guide/tips/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuser-guidetips><span>Tips</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsbenchmarks-li><a href=/docs/benchmarks/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsbenchmarks><span>benchmarks</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsbenchmarksarchive-li><a href=/docs/benchmarks/archive/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsbenchmarksarchive><span>Benchmark Archive</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsuse-case-li><a href=/docs/use-case/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsuse-case><span>Use Cases</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuse-casedata-scientist-li><a href=/docs/use-case/data-scientist/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuse-casedata-scientist><span>All Data Scientists</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsuse-caseindustries-li><a href=/docs/use-case/industries/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docsuse-caseindustries><span>Highly suitable use cases</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsrelease-note-li><a href=/docs/release-note/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsrelease-note><span>Release Note</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsabout-us-li><a href=/docs/about-us/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docsabout-us><span>About Us</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docshelp-li><a href=/docs/help/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-docshelp><span>Help</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshelpfaq-li><a href=/docs/help/faq/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshelpfaq><span>FAQ</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docshelpcontact-li><a href=/docs/help/contact/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-docshelpcontact><span>Contact</span></a></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#compatibility-concept>Compatibility Concept</a></li><li><a href=#copydeep--false>copy(deep = False)</a></li><li><a href=#use-with-pandas>Use with pandas</a></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/docs/>Docs</a></li><li class=breadcrumb-item><a href=/docs/user-guide/>User Guide</a></li><li class="breadcrumb-item active" aria-current=page>pandas compatibility</li></ol></nav><div class=td-content><h1>pandas compatibility</h1><header class=article-meta></header><p>FireDucks provides the same API (class names, method names, and attribute names) as pandas, and aims for compatibility in terms of being able to use it simply by changing import statements.</p><h2 id=compatibility-concept>Compatibility Concept</h2><p>We do <em>not</em> aim for compatibility in the following aspects.</p><ul><li>Complete consistency of class names<ul><li>FireDucks provides a pandas-compatible API in the module <code>fireducks.pandas</code>. The complete class names, including module names, are different from those of pandas.</li><li>For example, the data frame type is <code>pandas.DataFrame</code> in pandas, but <code>fireducks.pandas.DataFrame</code> in FireDucks, which are not exactly the same. Therefore, an explicit test for a pandas DataFrame, such as <code>isinstance(df, pandas.DataFrame)</code>, will be false. True for <code>import fireducks.pandas as pd; isinstance(df, pd.DataFrame)</code>.</li></ul></li><li>Full compatibility of errors and warnings<ul><li>Because of delayed execution, the timing of errors and warnings in FireDucks is different from that in pandas.</li><li>It is not the goal to match error messages (although the goal is to match Exception classes).</li><li>In addition, since Warnings may not be necessary in FireDucks, whether or not a Warning is generated may not match pandas.</li></ul></li><li>Complete reproduction of undefined behavior and bugs in pandas.<ul><li>We do not aim to reproduce the implementation-dependent behavior of pandas.</li><li>In particular, it may be undefined whether pandas returns a copy or a reference, and we do not recommend writing code that depends on either (<a href=https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#why-does-assignment-fail-when-using-chained-indexing>reference</a>).</li></ul></li><li>pandas internal API and Experimental features<ul><li>We do not aim to provide methods that begin with an underscore (<code>_</code>) or features that are marked as Experimental in the pandas documentation.</li></ul></li><li>Extending pandas<ul><li>Functions that extend pandas as described in <a href=https://pandas.pydata.org/docs/development/extending.html>Extending pandas</a> are currently not targeted.</li><li>These include the ability to create subclasses of DataFrames and Series, and the ability to define your own data types.</li></ul></li><li>Consistency of the order of merge/join result rows with pandas<ul><li>The order of rows in merge/join results may not match the order in pandas. Sorting will match.</li></ul></li><li>copy(deep=False) might not work when changes made in data values of &lsquo;copied&rsquo; instance is expected to be reflected in the data values of the
&lsquo;source&rsquo; instance. The changes made in the metadata will work as expected. <a href=https://fireducks-dev.github.io/docs/user-guide/04-compatibility/#copydeep--false>Refer</a> for more details.</li></ul><h2 id=copydeep--false>copy(deep = False)</h2><p>In pandas, df.copy(deep=False) is mostly used for the following two purposes:</p><ol><li><p>when we just want to modifiy the metadata of a table (like column name etc.), but not the actual content as follows:
<img src=../copy1.png alt=change_metadata></p></li><li><p>when we want the modification made in the &lsquo;copied&rsquo; (df2) instance to be reflected in the &lsquo;source&rsquo; (df1) instance as follows. This is more likely a side-effect of the shallow-copy, instead of what a user might want to perform.
<img src=../copy2.png alt=change_data_values></p></li></ol><p>FireDucks actually doesn&rsquo;t support in-place operations <em>in true sense</em>,
since it assumes all the data instances are immutable in nature (to improve performance).
Whenever an in-place operation on a column is performed, e.g. <code>df["A"] += 2</code>,
it allocates a new memory for that column to write the result of the operation and
modifies the data pointer as shown below to make it look like an in-place operation.
<img src=../in_place_op.jpg alt=in_place_addition></p><p>Hence, (1) will work as expected in FireDucks (because it doesn&rsquo;t change the actual data values),
but (2) will not work as expected, since the change on copied instance is reflected on a newly allocated memory
which is pointed by the &lsquo;copied&rsquo; instance (df2),
but the &lsquo;source&rsquo; instance (df1) still points to the initial memory as depicted in following figure:
<img src=../shallow_copy_issue.jpg alt=shallow_copy_issue>.</p><p>Usage similar to (1) can be found in some internal implementation of libraries like seaborn, skimpy etc.
Hence you can <strong>safely ignore the warning message</strong>, when using these libraries with import-hook enabled in FireDucks.</p><h2 id=use-with-pandas>Use with pandas</h2><p>The internal API and <code>isinstance</code> are frequently used in pandas. Therefore, <strong>using FireDucks with pandas will not work in most cases.</strong> It is recommended to rewrite all import statements or use <a href=https://fireducks-dev.github.io/docs/get-started/#import-hook>automatic conversion by import hook</a> to use FireDucks instead.</p><p>If for some reason you wish to use FireDucks with pandas or pass DataFrame or Series of FireDucks to a library that accepts those of pandas, please use the <a href=https://fireducks-dev.github.io/docs/user-guide/05-api/#pandas-conversion>pandas conversion function</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> somelib
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> fireducks.pandas <span style=color:#66d9ef>as</span> pd
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>df <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>read_csv(<span style=color:#f92672>...</span>)
</span></span><span style=display:flex><span>somelib<span style=color:#f92672>.</span>process_pandas_dataframe(df<span style=color:#f92672>.</span>to_pandas())
</span></span></code></pre></div></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="Post issues on GitHub issues" aria-label="Post issues on GitHub issues"><a target=_blank rel=noopener href=https://github.com/fireducks-dev/fireducks aria-label="Post issues on GitHub issues"><i class="fa-brands fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Send an e-mail to us" aria-label="Send an e-mail to us"><a target=_blank rel=noopener href=mailto:contact@fireducks.jp.nec.com aria-label="Send an e-mail to us"><i class="fa-solid fa-envelope"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Follow us in X" aria-label="Follow us in X"><a target=_blank rel=noopener href=https://x.com/fireducksdev aria-label="Follow us in X"><i class="fa-brands fa-x-twitter"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Join us on Slack" aria-label="Join us on Slack"><a target=_blank rel=noopener href=https://join.slack.com/t/fireducks/shared_invite/zt-2j4lucmtj-IGR7AWlXO62Lu605pnBJ2w aria-label="Join us on Slack"><i class="fa-brands fa-slack"></i></a></li></ul></div><div class="col-6 col-sm-4 text-end text-xs-center order-sm-3"></div><div class="td-footer__copyright-etc col-12 col-sm-4 text-center py-2 order-sm-2"><span>&copy; 2024 FireDucks Dev Team All Rights Reserved</span></div></div></div></footer></div><script src=/js/main.min.350b703200e2632331b6ab5a6c71195d176b52e89c9b70db7c43764d40b28d92.js integrity="sha256-NQtwMgDiYyMxtqtabHEZXRdrUuicm3DbfEN2TUCyjZI=" crossorigin=anonymous></script><script defer src=/js/click-to-copy.min.f724d3de49218995223b7316aa2e53e2b34bf42026bf399ebb21bb02212402d1.js integrity="sha256-9yTT3kkhiZUiO3MWqi5T4rNL9CAmvzmeuyG7AiEkAtE=" crossorigin=anonymous></script><script src=/js/tabpane-persist.js></script></body></html>