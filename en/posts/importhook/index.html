<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://fireducks-dev.github.io/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://fireducks-dev.github.io/fonts/vendor/jost/jost-v4-latin-500.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://fireducks-dev.github.io/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=https://fireducks-dev.github.io/main.280962f974eb82354c447978a6574463448ea8c1d8e7874c8642a004f5713d4dba64daa30b7bc622b650b58c5de2666e72015e3d2cc02195358f9693469d5b94.css integrity="sha512-KAli+XTrgjVMRHl4pldEY0SOqMHY54dMhkKgBPVxPU26ZNqjC3vGIrZQtYxd4mZucgFePSzAIZU1j5aTRp1blA==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Import hooks: how to use FireDucks without modifying your programs - FireDucks</title><meta name=description content="The import hook feature allows you to use FireDucks without modifying your existing programs at all."><link rel=canonical href=https://fireducks-dev.github.io/en/posts/importhook/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Import hooks: how to use FireDucks without modifying your programs"><meta property="og:description" content="The import hook feature allows you to use FireDucks without modifying your existing programs at all."><meta property="og:url" content="https://fireducks-dev.github.io/en/posts/importhook/"><meta property="og:site_name" content="FireDucks"><meta property="article:published_time" content="2023-11-15T09:35:10+09:00"><meta property="article:modified_time" content="2023-11-15T09:35:10+09:00"><meta property="og:image" content="https://fireducks-dev.github.io/fireducks.png"><meta property="og:image:alt" content="FireDucks"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@fireducksdev"><meta name=twitter:creator content="@fireducksdev"><meta name=twitter:title content="Import hooks: how to use FireDucks without modifying your programs"><meta name=twitter:description content="The import hook feature allows you to use FireDucks without modifying your existing programs at all."><meta name=twitter:image content="https://fireducks-dev.github.io/fireducks.png"><meta name=twitter:image:alt content="Import hooks: how to use FireDucks without modifying your programs"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://fireducks-dev.github.io/#/schema/organization/1","name":"FireDucks","url":"https://fireducks-dev.github.io/","sameAs":["https://twitter.com/fireducks","https://github.com/fireducks-dev"],"logo":{"@type":"ImageObject","@id":"https://fireducks-dev.github.io/#/schema/image/1","url":"https://fireducks-dev.github.io/fireducks.png","width":666,"height":298,"caption":"FireDucks"},"image":{"@id":"https://fireducks-dev.github.io/#/schema/image/1"}},{"@type":"WebSite","@id":"https://fireducks-dev.github.io/#/schema/website/1","url":"https://fireducks-dev.github.io/","name":"FireDucks","description":"FireDucks is a fast dataframe python library with pandas api","publisher":{"@id":"https://fireducks-dev.github.io/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://fireducks-dev.github.io/en/posts/importhook/","url":"https://fireducks-dev.github.io/en/posts/importhook/","name":"Import hooks: how to use FireDucks without modifying your programs","description":"The import hook feature allows you to use FireDucks without modifying your existing programs at all.","isPartOf":{"@id":"https://fireducks-dev.github.io/#/schema/website/1"},"about":{"@id":"https://fireducks-dev.github.io/#/schema/organization/1"},"datePublished":"2023-11-15T09:35:10CET","dateModified":"2023-11-15T09:35:10CET","breadcrumb":{"@id":"https://fireducks-dev.github.io/en/posts/importhook/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://fireducks-dev.github.io/en/posts/importhook/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://fireducks-dev.github.io/en/posts/importhook/"]}]},{"@type":"BreadcrumbList","@id":"https://fireducks-dev.github.io/en/posts/importhook/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://fireducks-dev.github.io/","url":"https://fireducks-dev.github.io/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://fireducks-dev.github.io/en/","url":"https://fireducks-dev.github.io/en/","name":"En"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://fireducks-dev.github.io/en/posts/","url":"https://fireducks-dev.github.io/en/posts/","name":"Posts"}},{"@type":"ListItem","position":4,"item":{"@id":"https://fireducks-dev.github.io/en/posts/importhook/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://fireducks-dev.github.io/en/posts/importhook/#/schema/image/2","url":"https://fireducks-dev.github.io/fireducks.png","contentUrl":"https://fireducks-dev.github.io/fireducks.png","caption":"Import hooks: how to use FireDucks without modifying your programs"}]}]}</script><meta name=theme-color content="#fff"><link rel=icon href=https://fireducks-dev.github.io/favicon.ico sizes=any><link rel=apple-touch-icon sizes=180x180 href=https://fireducks-dev.github.io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://fireducks-dev.github.io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://fireducks-dev.github.io/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://fireducks-dev.github.io/site.webmanifest><base href=https://fireducks-dev.github.io/></head><body class="posts single"><div class=sticky-top><div class=header-bar></div><header class="navbar navbar-expand-lg navbar-light doks-navbar"><nav class="container-xxl flex-wrap flex-lg-nowrap" aria-label="Main navigation"><a class="navbar-brand order-0" href=/en/ aria-label=FireDucks>FireDucks</a>
<button class="btn btn-menu order-2 d-block d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-end border-0 py-lg-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-lg-none"></div><div class="offcanvas-header d-lg-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=/en/>FireDucks</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body p-4 p-lg-0"><ul class="nav flex-column flex-lg-row align-items-lg-center mt-2 mt-lg-0 ms-lg-2 me-lg-auto"><li class=nav-item><a class="nav-link ps-0 py-1" href=/en/docs/get-started/get-started/>Get Started</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/en/docs/user-guide/01-intro/>Docs</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/en/docs/benchmarks/benchmarks/>Benchmarks</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/en/docs/about-us/about-us/>About Us</a></li></ul><hr class="text-black-50 my-4 d-lg-none"><form class="doks-search position-relative flex-grow-1 ms-lg-auto me-lg-2"><input id=search class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded d-none"></div></form><hr class="text-black-50 my-4 d-lg-none"><ul class="nav flex-column flex-lg-row"><li class=nav-item><a class="nav-link social-link" href=https://twitter.com/fireducksdev><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1200 1227" fill="currentcolor" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M714.163 519.284 1160.89.0H1055.03L667.137 450.887 357.328.0H0L468.492 681.821.0 1226.37H105.866L515.491 750.218 842.672 1226.37H12e2L714.137 519.284H714.163zM569.165 687.828l-47.468-67.894L144.011 79.6944H306.615L611.412 515.685l47.468 67.894 396.2 566.721H892.476L569.165 687.854V687.828z"/></svg><small class="ms-2 d-lg-none">Twitter</small></a></li></ul><hr class="text-black-50 my-4 d-lg-none"><button id=mode class="btn btn-link" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><hr class="text-black-50 my-4 d-lg-none"><div class=dropdown><button class="btn btn-doks-light dropdown-toggle" id=doks-languages data-bs-toggle=dropdown aria-expanded=false data-bs-display=static>
English
<span class=dropdown-caret><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"/></svg></span></button><ul class="dropdown-menu dropdown-menu-lg-end me-lg-2 shadow rounded border-0" aria-labelledby=doks-languages><li><a class="dropdown-item current" aria-current=true href=/en/posts/importhook/>English</a></li><li><hr class=dropdown-divider></li><li><a class=dropdown-item rel=alternate href=/ja/posts/importhook/ hreflang=ja lang=ja>Japanese</a></li></ul></div><a class="btn btn-primary mb-1" href=/en/docs/get-started/get-started/#install>Try for Free</a></div></div></nav></header></div><div class="wrap container-xxl" role=document><div class=content><article><div class="row justify-content-center"><div class="col-md-12 col-lg-12"><div class=blog-header><h1>Import hooks: how to use FireDucks without modifying your programs</h1><p><small>Posted&nbsp;on&nbsp;November 15, 2023 by
Osamu Daido</small></p></div></div><div class="col-md-12 col-lg-12"><p>This is Osamu Daido from the FireDucks development team.
In today&rsquo;s developers&rsquo; blog, I would like to introduce the import hook feature of FireDucks.
This feature enables you to use FireDucks without modifying your existing programs at all.</p><p>I&rsquo;ll explain how to use hooks when running Python files on the command line and how to enable hooks in IPython or Jupyter Notebook.</p><h1 id=what-is-an-import-hook>What is an import hook? <a href=#what-is-an-import-hook class=anchor aria-hidden=true>#</a></h1><p>FireDucks behaves in the same way as the original pandas, so it&rsquo;s easy to get started by simply modifying an import statement as follows:</p><pre><code class=language-python># import pandas as pd
import fireducks.pandas as pd
</code></pre><p>However, even if it&rsquo;s just a single line, finding and replacing import statements with FireDucks in your programs which use pandas may be annoying.
Moreover, if you want to use FireDucks in a third-party library that works with pandas, it&rsquo;s not practical to modify all import statements in that library.</p><p>As mentioned in <a href=/en/docs/get-started/get-started/#import-hook>Get Started</a>, FireDucks has a utility called an import hook.
Please specify the following options for the Python interpreter when you run <code>your_script.py</code> on the command line.</p><pre><code class=language-shell>python3 -m fireducks.imhook your_script.py
</code></pre><p>With this feature, <code>fireducks.pandas</code> is imported instead of <code>pandas</code> when the Python interpreter attempts to import <code>pandas</code>.
Keep in mind that this does not edit the source code of <code>your_script.py</code>, but rather dynamically hacks the import process while executing the program.</p><h2 id=example-of-an-import-hook>Example of an import hook <a href=#example-of-an-import-hook class=anchor aria-hidden=true>#</a></h2><p>Let&rsquo;s see it in action with a simple Python script, <code>print_classname.py</code>, as shown below.
This script outputs the repr string of the DataFrame class.</p><pre><code class=language-python>import pandas as pd
print(pd.DataFrame)
</code></pre><p>If you run it normally, the output is as follows:</p><pre><code class=language-shell>$ python3 print_classname.py
&lt;class 'pandas.core.frame.DataFrame'&gt;
</code></pre><p>With the import hook, the output becomes different from the previous one, as follows! 🥳</p><pre><code class=language-shell>$ python3 -m fireducks.imhook print_classname.py
&lt;class 'fireducks.pandas.frame.DataFrame'&gt;
</code></pre><p>So, yes, you can use dataframes of FireDucks even though you haven&rsquo;t edited the source code.</p><h2 id=limitations>Limitations <a href=#limitations class=anchor aria-hidden=true>#</a></h2><h3 id=no-shebang-support>No shebang support <a href=#no-shebang-support class=anchor aria-hidden=true>#</a></h3><p>Currently, execution by shebang (<code>#!...</code>) is not supported.</p><pre><code class=language-python>#!/usr/bin/python3
import pandas as pd
print(pd.DataFrame)
</code></pre><p>You cannot enable an import hook, as you cannot specify the <code>-m</code> option for the Python interpreter (hmm, it&rsquo;s of course).</p><pre><code class=language-shell>$ chmod +x print_classname_shebang.py
$ ./print_classname_shebang.py
&lt;class 'pandas.core.frame.DataFrame'&gt;
</code></pre><h3 id=no-combination-with-other-executable-modules>No combination with other executable modules <a href=#no-combination-with-other-executable-modules class=anchor aria-hidden=true>#</a></h3><p>The import hook feature cannot be used concurrently with other tools invoked by the <code>-m</code> option, as only one <code>-m</code> option can be passed to the Python interpreter.</p><h3 id=no-subprocess-support>No subprocess support <a href=#no-subprocess-support class=anchor aria-hidden=true>#</a></h3><p>If you start a new Python process using the <code>subprocess</code> module, the import hook settings are not inherited by that subprocess.</p><h1 id=how-to-use-import-hooks-in-jupyter-notebook>How to use import hooks in Jupyter Notebook <a href=#how-to-use-import-hooks-in-jupyter-notebook class=anchor aria-hidden=true>#</a></h1><p>The import hook feature is also available in Jupyter Notebook.
Currently, however, you cannot specify an option when starting Jupyter, and you must activate a hook explicitly in the first cell of your notebook.</p><pre><code class=language-python>import fireducks.importhook
fireducks.importhook.activate_hook(&quot;fireducks.pandas&quot;, &quot;pandas&quot;)
</code></pre><p>There may not be much benefit to using import hooks if you&rsquo;re just using pandas in your own notebook.
On the other hand, import hooks also work with third-party libraries that use pandas, so it&rsquo;s useful if you want to utilize such libraries in your notebook.</p><p>If you want to disable a hook, please call the following function.</p><pre><code class=language-python>fireducks.importhook.deactivate_hook()
</code></pre><p>However, if you mix dataframes from the original pandas with ones from FireDucks, you will likely encounter errors (probably with complicated and mysterious error messages).
Basically, it is recommended to keep a hook enabled once you enable it.</p><h2 id=how-to-use-import-hooks-with-ipython-cli>How to use import hooks with IPython CLI <a href=#how-to-use-import-hooks-with-ipython-cli class=anchor aria-hidden=true>#</a></h2><p>With IPython, you can enable a hook manually in the same way as in Jupyter Notebook described above.
Another option is to start the IPython CLI as follows (this is an example with bash):</p><pre><code class=language-shell>python3 -m fireducks.imhook &quot;$(which ipython)&quot;
</code></pre><p>Well, it&rsquo;s a bit of an unusual way, but it works!</p><h1 id=wrap-up>Wrap-up <a href=#wrap-up class=anchor aria-hidden=true>#</a></h1><p>FireDucks is still under research and development, so you may face errors and problems if you switch from using pandas to FireDucks.
We have been working on improving features of FireDucks every day since the release of the beta version.
Your feedback, bug reports, and feature requests are welcome!
Please see our <a href=/en/docs/help/contact/>contact information</a> for further details.</p><p>To sum up, I&rsquo;ve shown you how to use FireDucks without modifying your existing programs at all.
If you want to try FireDucks, please refer to <a href=/en/docs/get-started/get-started/>Get Started</a> and <a href=/en/docs/user-guide/01-intro/>User Guide</a> documents. For information on how much faster FireDucks is compared to pandas, please check out our <a href=/en/docs/benchmarks/benchmarks/>Benchmarks</a>.</p><p>May the Acceleration be with you,<br>FireDucks Development Team</p></div></div></article></div></div><footer class="footer text-muted"><div class=container-xxl><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a class=text-muted href=https://gohugo.io/>Hugo</a> and <a class=text-muted href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/js/bootstrap.min.7315382e899a7d7132d93fdf0d6682c67a93f0e72ee1a757f33f3207de3b14e2460a935c9d4cec78f86d94ab892d053c70540695eed0bbb7bf5bdc979e6f5a9f.js integrity="sha512-cxU4LomafXEy2T/fDWaCxnqT8Ocu4adX8z8yB947FOJGCpNcnUzsePhtlKuJLQU8cFQGle7Qu7e/W9yXnm9anw==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.8b2d7ddd72ba2c88d5107387eb3b66b90f1f864fd5afef6aed284425efb5919a9bc092f653f2985a205b85b0a158f70b460643ba2b71ccf7d3c1c107c3a4b609.js integrity="sha512-iy193XK6LIjVEHOH6ztmuQ8fhk/Vr+9q7ShEJe+1kZqbwJL2U/KYWiBbhbChWPcLRgZDuitxzPfTwcEHw6S2CQ==" crossorigin=anonymous defer></script>
<script src=/main.min.57d9a84956f7d60008c47938c7fdd2f75e8618ff1d09c5a5e2b32f91debaf7681f7ceca8b51aded60067c2136172134a91ebc0674487c76a04e3244d927ebdde.js integrity="sha512-V9moSVb31gAIxHk4x/3S916GGP8dCcWl4rMvkd6692gffOyotRre1gBnwhNhchNKkevAZ0SHx2oE4yRNkn693g==" crossorigin=anonymous defer></script>
<script src=https://fireducks-dev.github.io/index.min.3be4d9293b61c2fb15bf0a33e4b774cf5de6a3205716dd0df9676570eec6e24d3e55d3b76f0ca57311de994bda2c62b7966199a56c04f247e8757531ad0dc5a6.js integrity="sha512-O+TZKTthwvsVvwoz5Ld0z13moyBXFt0N+WdlcO7G4k0+VdO3bwylcxHemUvaLGK3lmGZpWwE8kfodXUxrQ3Fpg==" crossorigin=anonymous defer></script></body></html>